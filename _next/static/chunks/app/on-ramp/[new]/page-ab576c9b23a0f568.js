(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4553],{18026:function(e,t,a){Promise.resolve().then(a.bind(a,77304))},77304:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return V}});var l=a(57437),i=a(2265),n=a(39343),s=a(16463),o=a(31367),r=a(90407),d=a(91310),c=a(65658),u=a(74649),m=a(31014),p=a(76460),y=(e,t,a)=>{let[l,n]=(0,i.useState)({legalFirstName:"",legalMiddleName:"",legalLastName:"",legalFullName:"",incorporationJurisdiction:"",entityName:"",entityRole:"",entityType:""});return(0,i.useEffect)(()=>{async function l(){if(e&&t&&a)try{let t=await p.hi.token.getPremints(r.as,r.CF,{wallet:e});if(t.ok&&Object.keys(t.data).length){let{legalFirstName:e,legalLastName:a,legalMiddleName:l,incorporationJurisdiction:i,entityName:s,entityRole:o}=t.data[0];n({legalFirstName:null!=e?e:"",legalMiddleName:null!=l?l:"",legalLastName:null!=a?a:"",incorporationJurisdiction:null!=i?i:null,entityName:null!=s?s:null,entityRole:null!=o?o:null})}}catch(e){console.error(e)}}e&&t&&a&&l()},[e,t,a]),l},h=a(8526),x=a(44244),g=a(22104),f=a(96932),v=a(13987),N=a(33740),j=a(87621),w=a(99222),b=a(54039),F=a(98622),k=a(64967),T=a(83325);function V(){let{authToken:e,user:t}=(0,d.SX)(),{address:a,isConnected:p}=(0,T.m)(),[V]=(0,i.useState)(),[C,I]=(0,i.useState)(!1),[S,E]=(0,i.useState)({title:"",body:""}),[J,L]=(0,i.useState)(!1),M=(0,s.useRouter)(),R=y(a,e,p);function Z(){I(!1),L(!1),location.reload()}(0,i.useEffect)(()=>{(0,h.Jy)()},[]);let P=(0,n.cI)({resolver:(0,m.F)(v.f)});(0,i.useEffect)(()=>{(async()=>{var e,l,i;P.setValue("legalFirstName",null==R?void 0:R.legalFirstName),P.setValue("legalMiddleName",null==R?void 0:R.legalMiddleName),P.setValue("legalLastName",null==R?void 0:R.legalLastName),P.setValue("incorporationJurisdiction",null==R?void 0:null===(l=R.incorporationJurisdiction)||void 0===l?void 0:null===(e=l.toLocaleUpperCase())||void 0===e?void 0:e.split("-")[1]),P.setValue("entityName",null==R?void 0:R.entityName),P.setValue("entityRole",null==R?void 0:R.entityRole),P.setValue("entityType",null==R?void 0:R.entityType),P.setValue("walletAddress",a),P.setValue("email",null!==(i=null==t?void 0:t.email)&&void 0!==i?i:"")})()},[a,P,P.setValue,P.trigger,null==R?void 0:R.entityName,null==R?void 0:R.entityRole,null==R?void 0:R.entityType,null==R?void 0:R.incorporationJurisdiction,null==R?void 0:R.legalFirstName,null==R?void 0:R.legalLastName,null==R?void 0:R.legalMiddleName,null==t?void 0:t.email]);let _=(0,i.useCallback)(()=>{let t=async t=>{if(void 0===a)throw Error("Attempt to submit premint without wallet address");if(!t.email)throw Error("Attempt to submit a premint without email address from Dynamic.xyz");let i="individual"===t.ownerType,n="".concat(t.legalFirstName," ").concat(t.legalMiddleName," ").concat(t.legalLastName),s={ownerType:t.ownerType,recipients:{[a]:"1"},adminId:t.adminId,propertyId:t.propertyId,legalFirstName:t.legalFirstName,legalMiddleName:t.legalMiddleName||null,legalLastName:t.legalLastName,legalFullName:n.replace(/\s+/g," ").trim(),incorporationJurisdiction:i?void 0:t.incorporationJurisdiction,email:t.email,entityName:i?void 0:t.entityName,entityType:i?void 0:t.entityType,entityRole:i?void 0:t.entityRole,vendor:t.vendor,vendorId:t.vendorId,clientInput:t.clientInput},o=new k.V0({baseUrl:r._4,baseApiParams:{secure:!0},securityWorker:()=>({headers:{Authorization:"Bearer ".concat(e)}})});try{let e=await o.token.premintTokenV2(r.as,r.CF,s);switch(e.data.status){case"unsupportedJurisdiction":I(!0),E({title:"Unsupported Geography",body:(0,l.jsxs)(l.Fragment,{children:["Unfortunately, we're not yet ready to on-ramp this property because it's in a state or county we don't support ",(0,l.jsx)("em",{className:"font-sans-italic underline",children:"yet"}),". However, we're constantly expanding our footprint and will reach out the moment you can on-ramp this property."]})});break;case"canceled":I(!0),E({title:"Minting Canceled",body:"Sorry, we're having trouble minting your token. Please try again in a few minutes or reach out if the issue persists."});break;default:I(!1),M.push("/on-ramp/token/".concat(e.data.tokenId))}}catch(t){let e="";I(!0),E({title:"This one is on us",body:404===t.status?"Sorry, we couldn't locate this property.":"An error occurred while gathering information about the property. Please try again in a few minutes or reach out if the issue persists."})}finally{fetch("/api/mail",{method:"post",body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"Success"===e.message&&console.log("***Email sent successfully***")}).catch(()=>{Z(),console.log("***Email failed to send***")})}};return p&&e?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("section",{className:"mb-10 inline-flex flex-col px-2 pt-4 transition-all sm:px-8",children:[(0,l.jsx)(b.Z,{}),(0,l.jsx)(n.RV,{...P,children:(0,l.jsxs)("form",{className:"mint-form border border-none py-12 sm:px-2",onSubmit:P.handleSubmit(t),children:[(0,l.jsx)(x.Z,{}),(0,l.jsx)(g.Z,{}),(0,l.jsx)(f.Z,{}),(0,l.jsx)(N.Z,{substeps:V}),(0,l.jsx)(j.Z,{}),(0,l.jsx)(w.Z,{substeps:V}),(0,l.jsx)("input",{type:"hidden",...P.register("adminId")}),(0,l.jsx)("input",{type:"hidden",...P.register("propertyId")}),(0,l.jsx)("input",{type:"hidden",...P.register("path")}),(0,l.jsx)("input",{type:"hidden",...P.register("vendor")}),(0,l.jsx)("input",{type:"hidden",...P.register("vendorId")}),(0,l.jsx)("input",{type:"hidden",...P.register("clientInput")}),(0,l.jsx)("input",{type:"hidden",...P.register("email")})]})}),(0,l.jsx)(c.u,{appear:!0,show:J,as:i.Fragment,children:(0,l.jsxs)(u.V,{as:"div",className:"relative z-10",onClose:Z,children:[(0,l.jsx)(c.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,l.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,l.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,l.jsx)(c.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,l.jsxs)(u.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-offwhite p-6 text-left align-middle shadow-xl transition-all",children:[(0,l.jsx)(u.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Step 1 Completed"}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Our team will take a look and reach back out to you when we're ready for the next step. This typically takes a few days."})}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("button",{type:"button",className:"btn",onClick:()=>{Z()},children:"Got it, thanks!"})})]})})})})]})}),(0,l.jsx)(c.u,{appear:!0,show:C,as:i.Fragment,children:(0,l.jsxs)(u.V,{as:"div",className:"relative z-10",onClose:Z,children:[(0,l.jsx)(c.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,l.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,l.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,l.jsx)(c.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,l.jsxs)(u.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-offwhite p-6 text-left align-middle shadow-xl transition-all",children:[(0,l.jsx)(u.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,l.jsx)(o.Z,{className:"h-[20px] w-[20px] fill-red-600"})," ",S.title]})}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("p",{className:"text-sm text-gray-500",children:S.body})}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("button",{type:"button",className:"btn !w-auto !min-w-0",onClick:Z,children:"Got it"})})]})})})})]})})]})}):(0,l.jsx)(F.Z,{})},[p,P,J,C,S.title,S.body,M,e,null==t?void 0:t.email]);return(0,l.jsx)(_,{})}}},function(e){e.O(0,[3814,1473,3415,8173,9892,831,6261,6323,9931,5076,6064,4149,7725,6263,9958,6460,5360,2805,8909,2971,7023,1744],function(){return e(e.s=18026)}),_N_E=e.O()}]);